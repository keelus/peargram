<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Peargram</title>
	<link rel="stylesheet" href="/assets/css/index.css">
	<link rel="stylesheet" href="/assets/css/profile.css">
	<link rel="stylesheet" href="/assets/css/sidenav.css">
	<link rel="stylesheet" href="/assets/css/messages.css">
	<link rel="stylesheet" href="/assets/css/modal.css">
	<link rel="stylesheet" href="/assets/css/notifications.css">
	<link rel="stylesheet" href="/assets/css/search.css">
	<link rel="stylesheet" href="/assets/css/post.css">

	<link rel="stylesheet" href="/assets/media/fonts/webfont/tabler-icons.min.css">

	<link rel="shortcut icon" href="/assets/media/icons/favicon.ico" type="image/x-icon">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
	<!-- <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script> -->
</head>
<body style="background:black;">
	{{ template "sidenav.html". }}

	{{ if eq .LoadPane "index" }}
		{{ template "index.html". }}
	{{ else if eq .LoadPane "search" }}
		{{ template "search.html". }}
	{{ else if eq .LoadPane "messages" }}
		{{ template "messages.html". }}
	{{ else if eq .LoadPane "notifications" }}
		{{ template "notifications.html". }}
	{{ else if eq .LoadPane "profile" }}
		{{ template "profile.html". }}
	{{ else if eq .LoadPane "post" }}
		{{ template "post.html". }}
	{{ end }}
</body>
</html>

<script>
// $(document).on("mousedown",".EmbeddedLoad", (e) => { if (e.which == 2) e.preventDefault()});
// $(document).on("mouseup",".EmbeddedLoad", (e) => {
// 	let target = $(e.target).closest(".EmbeddedLoad").attr("target") || ""
// 	let detail = $(e.target).closest(".EmbeddedLoad").attr("detail") || ""
	
// 	if(target=="index")
// 		target=""

// 	if (target=="profile"){
// 		target="profile/" + detail
// 	}

// 	if (target=="post"){
// 		target="post/" + detail
// 	}

// 	console.log(target)

// 	if (e.which == 1 && ! e.ctrlKey) { // Left click
// 		$.ajax({
// 			type: "GET",
// 			url: `/${target}?type=short`,
// 			success: function (r) {
// 				$("body > .content").remove()
// 				$("body").append(r)

// 				window.history.pushState("/" + (target || ""), "/" + (target || ""), "/" + target)
// 			}
// 		});
// 	}
// 	if (e.which == 1 && e.ctrlKey || e.which == 2) { // Middle click
// 		window.open(`/${target}`, "_blank")
// 	}
// })

// addEventListener("popstate", function (e) {
// 	e.preventDefault();

// 	previousUrl = window.history.state
// 	window.location.href = previousUrl
// });

</script>
<script type="module" src="/assets/js/EmbedHandler.js"></script>
<script type="module" src="/assets/js/PeargramWS.js"></script>
<script type="module" src="/assets/js/Messages.js"></script>
<script type="module" src="/assets/js/Search.js"></script>
<script type="module" src="/assets/js/Profile.js"></script>